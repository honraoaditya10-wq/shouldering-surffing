<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OmniGuard Pro â€” Advanced Security Suite</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- face-api.js (core) -->
  <script defer src="https://cdn.jsdelivr.net/npm/face-api.js/dist/face-api.min.js"></script>

  <!-- App logic -->
  <script defer src="index.js"></script>
</head>
<body>
  <!-- Alert Audio (hidden) -->
  <audio id="alertAudio" loop preload="auto">
    <source src="alert.mp3" type="audio/mpeg">
  </audio>

  <header class="topbar">
    <div class="brand">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" fill="currentColor"/>
        </svg>
      </div>
      <div>
        <h1>OmniGuard Pro</h1>
        <small>AI-Powered Security & Privacy Protection</small>
      </div>
    </div>

    <div class="controls">
      <button id="settingsBtn" class="icon-btn" title="Settings">âš™ï¸</button>
      <button id="themeToggle" class="icon-btn" title="Toggle theme">ğŸŒ—</button>
      <button id="fullscreenBtn" class="icon-btn" title="Fullscreen">â›¶</button>
      <button id="enrollBtn" class="primary">+ Enroll Face</button>
      <button id="authBtn" class="secondary">ğŸ” Authenticate</button>
    </div>
  </header>

  <main class="main-grid">
    <!-- Left: Camera + HUD -->
    <section class="panel camera-panel">
      <div class="camera-wrap">
        <video id="video" autoplay muted playsinline></video>
        <canvas id="overlay"></canvas>

        <!-- Status Badge -->
        <div class="status-badge" id="statusBadge">
          <span class="status-dot"></span>
          <span id="statusText">Initializing...</span>
        </div>

        <!-- Mirror Toggle -->
        <div class="floating-control mirror-control">
          <label class="toggle-switch">
            <input type="checkbox" id="mirrorMe" checked />
            <span class="slider"></span>
          </label>
          <span>Mirror</span>
        </div>

        <!-- Recording Indicator -->
        <div class="recording-indicator" id="recordingIndicator" style="display:none;">
          <span class="rec-dot"></span> RECORDING
        </div>
      </div>

      <!-- Alert Box -->
      <div id="alert" class="alert neutral">
        <span class="alert-icon">ğŸ”</span>
        <span id="alertText">Initializing security systems...</span>
      </div>

      <!-- Control Buttons -->
      <div class="controls-row">
        <button id="privacyBtn" class="btn-control warning">
          <span class="btn-icon">ğŸ”’</span>
          <span>Privacy Blur</span>
        </button>
        <button id="soundBtn" class="btn-control secondary active">
          <span class="btn-icon">ğŸ”Š</span>
          <span>Sound</span>
        </button>
        <button id="lockBtn" class="btn-control danger">
          <span class="btn-icon">ğŸ”</span>
          <span>Emergency Lock</span>
        </button>
        <button id="snapshotBtn" class="btn-control primary">
          <span class="btn-icon">ğŸ“·</span>
          <span>Snapshot</span>
        </button>
      </div>

      <!-- Enhanced Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ‘¤</div>
          <div class="stat-content">
            <strong id="facesCount">0</strong>
            <span>Detected Faces</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ“Š</div>
          <div class="stat-content">
            <strong id="motionVal">0</strong>
            <span>Motion Level</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ§ </div>
          <div class="stat-content">
            <strong id="modelStatus">â€”</strong>
            <span>AI Model</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">â±ï¸</div>
          <div class="stat-content">
            <strong id="uptime">00:00</strong>
            <span>Uptime</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Right: PIN + Keypad + Features -->
    <section class="panel right-panel">
      <!-- Secure PIN Pad -->
      <div class="card pin-card">
        <div class="card-header">
          <h2>ğŸ”¢ Secure PIN Pad</h2>
          <div class="security-level">
            <span class="security-badge high">High Security</span>
          </div>
        </div>
        <input id="pinDisplay" class="pin-display" type="password" placeholder="Blocked until safe" disabled />
        <div class="pin-strength">
          <div class="strength-bar" id="strengthBar"></div>
        </div>
        <div class="keypad" id="keypad"></div>
        <div class="key-actions">
          <button id="clearPinBtn" class="secondary">Clear</button>
          <button id="shuffleBtn" class="secondary">ğŸ”€ Shuffle</button>
          <button id="enterPinBtn" class="primary">âœ“ Enter</button>
        </div>
        <div class="feature-list">
          <div class="feature-item">âœ“ Anti-keylogger protection</div>
          <div class="feature-item">âœ“ Shoulder-surf detection</div>
          <div class="feature-item">âœ“ Dynamic key randomization</div>
        </div>
      </div>

      <!-- Face Enrollment -->
      <div class="card enroll-card">
        <div class="card-header">
          <h2>ğŸ‘¤ Face Management</h2>
        </div>
        <div class="enroll-form">
          <input id="userName" class="input-field" placeholder="Enter your name" />
          <button id="captureEnroll" class="primary full-width">
            <span>ğŸ“¸ Capture & Enroll</span>
          </button>
        </div>
        <div class="enrolled-users" id="enrolledUsers">
          <div class="enrolled-header">Enrolled Users (<span id="userCount">0</span>)</div>
          <div id="usersList" class="users-list"></div>
        </div>
        <button id="clearEnrollments" class="danger full-width">Clear All Enrollments</button>
      </div>

      <!-- Security Settings -->
      <div class="card settings-card">
        <div class="card-header">
          <h2>âš™ï¸ Security Settings</h2>
        </div>
        <div class="settings-group">
          <div class="setting-item">
            <label>
              <input type="checkbox" id="autoLock" checked />
              <span>Auto-lock on threat</span>
            </label>
          </div>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="alertSound" checked />
              <span>Alert sound on detection</span>
            </label>
          </div>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="recordEvents" checked />
              <span>Record security events</span>
            </label>
          </div>
          <div class="setting-item">
            <label>
              Sensitivity: <span id="sensitivityValue">5</span>
            </label>
            <input type="range" id="sensitivity" min="1" max="10" value="5" class="slider-input" />
          </div>
        </div>
      </div>

      <!-- Event Log -->
      <div class="card log-card">
        <div class="card-header">
          <h2>ğŸ“‹ Security Log</h2>
          <div class="log-actions">
            <button id="clearLog" class="icon-btn" title="Clear log">ğŸ—‘ï¸</button>
            <button id="exportLog" class="icon-btn" title="Export log">ğŸ’¾</button>
          </div>
        </div>
        <div id="events" class="events"></div>
        <div class="log-stats">
          <span>Total Events: <strong id="eventCount">0</strong></span>
          <span>Threats: <strong id="threatCount">0</strong></span>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <strong>OmniGuard Pro v2.0</strong>
        <p>Advanced AI-powered security and privacy protection system</p>
      </div>
      <div class="footer-section">
        <small>ğŸ’¡ Tip: Place the 'models' folder in the same directory for optimal face detection performance.</small>
      </div>
      <div class="footer-section">
        <small>Â© 2025 OmniGuard. Protecting your privacy with cutting-edge AI.</small>
      </div>
    </div>
  </footer>
</body>
</html>